= Configuring Hazelcast via the Admin Console

This page covers how to use and configure the Hazelcast functionality in Payara
{{ book.currentVersion }} from the Admin Console.

== Enabling Hazelcast

In the default domain configuration of Payara, Hazelcast is not enabled.
To enable Hazelcast, from the Admin Console home:

* Select the instance's configuration from the page tree:

image::/images/hazelcast/hazelcast-admin-console-select-instance-config.png[Payara Server 4.1.2.172 Page Tree]

* Click the "Hazelcast" button to view the "Hazelcast
Configuration" page:

image::/images/hazelcast/hazelcast-admin-console-select-hazelcast.png[Payara Server 4.1.2.172 Hazelcast Selection]

* Check "Enabled" (and optionally "Dynamic" to apply
the configuration without a restart) and save.

image::/images/hazelcast/hazelcast-admin-console-enable-hazelcast.png[Payara Server 4.1.2.172 Enabling Hazelcast]

== Configuring Hazelcast

Hazelcast can be configured via the Admin Console and asadmin commands, or by a
provided Hazelcast configuration file.

Using a Hazelcast configuration file will cause the settings set via the Admin
Console and _asadmin_ commands to be ignored. Any parameters not specified in
the configuration file revert to the Hazelcast defaults, even if they are
specified in the Admin Console or _domain.xml_ (Note - the link::https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/resources/hazelcast-default.xml[Hazelcast defaults]
are not necessarily the same as the Payara Hazelcast defaults).

=== Setting a Hazelcast Configuration File with the Admin Console

To set the Hazelcast configuration from a Hazelcast Configuration file:

* Select the instance's configuration from
the page tree and click the "Hazelcast" button to view the "Hazelcast
Configuration" page:

image::/images/hazelcast/hazelcast-select-hazelcast.png[Payara Server 4.1.2.172 Hazelcast Selection]

* On the Hazelcast Configuration page, add the path to your Hazelcast
Configuration file and click "Save". This path is relative to your domain
configuration directory.

image::/images/hazelcast/hazelcast-admin-console-set-configuration-file.png[Payara Server 4.1.2.172 Hazelcast Set Configuration File]

=== Configuring Hazelcast with the Admin Console

Navigate to the _Hazelcast Configuration_ page of your instances configuration.

image::/images/hazelcast/hazelcast-admin-console-hazelcast-options.png[Payara 4.1.2.172 Hazelcast Options]

The following configuration options are available here:

[cols=",",options="header",]
|====
|Property |Description
|Enabled |Whether or not Hazelcast is enabled.

|Dynamic |Determines if the Hazelcast member embedded in Payara will be
restarted to apply any changes made

|Override Configuration File |Specifies the Hazelcast configuration file
to use. The path specified is relative to the domain config directory.

If you are using a custom GlassFish server configuration for a cluster
or standalone instance (e.g. _cluster-config_), then the Hazelcast
configuration file should be placed in the directory with the same name
(e.g. <domain-root>/config/cluster-config). This will ensure it is
replicated to the node during startup.

Using this option to point to a valid Hazelcast configuration file will cause
all other options set to be ignored. Any options unset within the Hazelcast
configuration file will be set to the Hazelcast defaults.

|Cluster Group Name | Specifies the Hazelcast group name, to be optionally used
 to help divide clusters into logical, segregated groups (i.e. _dev-group_,
   _prod-group_).

|Cluster Group Password |Specifies the password used to access the Hazelcast
group.

|Start Port | The port to run Hazelcast on. If this port is busy, the port
specified will be incremented until a valid port is found.

|Multicast Port |The multicast port for communications in the Hazelcast
cluster.

|Multicast Group |The multicast group for communications in the
Hazelcast cluster.

|JNDI Name |The JNDI name to bind the Hazelcast instance to.

|License Key |Enables
link::https://hazelcast.com/products/enterprise/[Hazelcast Enterprise]
features.

|Lite Cluster Member|If set to true, cluster members with this configuration
will be Hazelcast "lite" nodes, meaning they will not store any cache data
locally and rely on other cluster members to store data.

|Host Aware Partitioning |Whether or not to enable
link::http://docs.hazelcast.org/docs/latest/manual/html-single/index.html#grouping-types[host-aware partitioning]
 for the cluster.
Host aware partitioning *must be* enabled
on all members of the cluster (including Payara Micro instances) for
this feature to work correctly.
|====

Enter your required values, and click _Save_. Restarting the domain or
instance/cluster is not necessary for any changes made to take effect, provided
that "Dynamic" remains set to "_true_"

== Viewing Hazelcast Cluster Members from the Admin Console

It is possible to view members of Hazelcast clusters from the Admin Console.
If the DAS also has Hazelcast enabled, it is possible to view a table of all
connected Payara Server and Payara Micro instances. Otherwise, Hazelcast
Cluster members can be viewed on an instance by instance basis.

To view Hazelcast cluster members from the admin console:

=== Viewing HazelcastCluster Members from the DAS

* If Hazelcast is enabled on the DAS (`server-config`), select "_Domain_"
from the page tree:

image::/images/hazelcast/hazelcast-admin-console-select-das.png[Payara 4.1.2.172 Page Tree]

* Open the "Hazelcast" tab and select the "Cluster Members" sub-tab to view
the cluster members page:

image::/images/hazelcast/hazelcast-admin-console-view-cluster-members-from-domain.png[Payara 4.1.2.172 Domain Cluster Members]

=== Viewing Hazelcast Cluster Members from an instance

* Select an instance within the cluster you wish to view from the page tree:

image::/images/hazelcast/hazelcast-admin-console-select-instance.png[Payara 4.1.2.172 Page Tree]

* Open the "Hazelcast" tab and select the "Cluster Members" sub-tab to view
the cluster members page:

image::/images/hazelcast/hazelcast-admin-console-view-cluster-members.png[Payara 4.1.2.172 Cluster Members]

== Using Hazelcast for Web and EJB Container Persistence

Hazelcast can be used as the persistence provider for both Web and EJB
containers.

[[setting-hazelcast-as-the-persistence-provider-through-the-admin-console]]
=== Setting Hazelcast as the Persistence provider through the Admin Console

[NOTE]
====
Note that you can always select Hazelcast as a persistence provider, even if
it it not yet enabled.
====

To set up Hazelcast for persistence:

* Select the instance's configuration from the page tree:

image::/images/hazelcast/hazelcast-admin-console-select-instance-config.png[Payara 4.1.2.172 Page Tree]

* Select "Availability Service" to view the "Availability Service" page:

image::/images/hazelcast/hazelcast-admin-console-select-availability-service.png[Payara 4.1.2.172 Availability Service]

==== Setting Web Persistence

* Open the "Web Container Availability" tab, and select "Hazelcast" from the
Persistence Type drop-down menu:

image::/images/hazelcast/hazelcast-admin-console-availability-enable-web-persistence.png[Payara 4.1.2.172 Web Persistence]

* Save the changes.

==== Setting EJB Persistence

* Open the "EJB Container Availability" tab and select "Hazelcast" from the
Persistence Type drop-down menu:

image::/images/hazelcast/hazelcast-admin-console-availability-enable-ejb-persistence.png[Payara 4.1.2.172 EJB Persistence]

* Save the changes.
